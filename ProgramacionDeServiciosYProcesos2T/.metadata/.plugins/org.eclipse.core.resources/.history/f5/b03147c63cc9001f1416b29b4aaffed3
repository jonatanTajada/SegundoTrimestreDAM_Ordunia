package com.ejemplo.servidor;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class ServidorBasico {

	
	
	public static void main(String[] args) {
		
		//Puerto donde el servidor estara escuchando
		int puerto = 1234;
		
		System.out.println("Iniciando servidor en el puerto: " + puerto + "...");
		
		try (ServerSocket serverSocket = new ServerSocket(puerto)){
			
			System.out.println("Servidor esperando conexiones...");
			
			 // Aceptar la conexi√≥n del cliente
			Socket socketCliente = serverSocket.accept();
			System.out.println("Cliente conectado desde: " + socketCliente.getInetAddress());
			
			//Obtener los streams de entrada o salida
			BufferedReader entrada = new BufferedReader(new InputStreamReader(socketCliente.getInputStream()));
			PrintWriter salida = new PrintWriter(socketCliente.getOutputStream(), true);
			
			//Leer datos del cliente
			String mensajeCliente;
			
			while ((mensajeCliente = entrada.readLine()) != null) {
				
				System.out.println("Cliente dice: " + mensajeCliente);
			}
			
			
			//Enviar respuesta al cliente
			salida.println("Servidor: Recibido: " + mensajeCliente);
			
			//Salir si el cliente envia 
			
			
		} catch (IOException e) {
			System.err.println("Ocurrio algun tipo de error de E/S");
			e.printStackTrace();
		}
		
		
		
		
		
		
		
		
		
		
		
	}
	
	
	
	
	
	
	
}
